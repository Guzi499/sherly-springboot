<h1 align="center">产品需求说明书</h1>
<p align="center">
	<a href='https://gitee.com/guzi499/universal-practice-repository/stargazers'>
        <img src='https://gitee.com/guzi499/universal-practice-repository/badge/star.svg?theme=dark' alt='star'/>
    </a>
</p>

### 项目简介

本项目是基于 SpringBoot2.x 和 Vue3 或 React 的前后端分离的Java多租户权限管理系统。

多租户实现方案为 mysql 分库，采用 mybatis-plus 动态表名功能实现。
解决了多租户数据隔离的问题，不同的租户使用不同的数据库，完美做到数据隔离。

其次，多租户分为主租户和购入租户，主租户可以管理其他所有租户的服务和用户量。根据购入租户的购买规模、购买服务来提供支持。

主租户实现功能后，可以根据需求将菜单、权限分给下属购入租户，购入租户拥有这些菜单、权限后，就可以使用对应的菜单、权限功能。

另外，本项目根据开发者们经常遇到的开发问题，也进行问题收集和解决。具体请参考`README.md`

<br><br>

### 需求说明

#### 【1】租户管理
##### （1.1）租户新增
进入租户管理页面，点击新增，弹出弹窗，填写**租户名称**，**租户code**，**租户过期时间**，**用户上限**，**手机号**后新增一个租户。<br>
租户新增后，根据db文件夹下的sql，生成购入租户的各种数据表，由主租户对购入租户进行配置（待实现）。

- 租户名称和租户code需要去重处理
##### （1.2）租户更新
进入租户管理页面，点击租户行尾修改，弹出弹窗，修改**租户过期时间**，**用户上限**后修改一个租户。
##### （1.3）租户分页条件查询
进入租户管理页面，对租户进行分页查询，分页条件有**租户名称**，**租户code**可选择。
- 条件查询的**租户名称**使用字符串模糊查询，**租户code**使用字符串完全匹配
##### （1.4）租户禁用与启用
进入租户管理页面，可在列表尾设置启用与禁用。
- 这里需要使用开关按钮实现。
- 租户禁用后，该租户下所有用户不可登录，提示`租户冻结，请联系供应商！`。

<hr>

#### 【2】菜单管理
##### （2.1）菜单新增
进入菜单管理页面，点击新增，弹出弹窗，填写**菜单名**，**父菜单id**，**菜单路径**，**图标**，**排序**后新增一个菜单。
- 父菜单id选择那里使用树形控件
- 菜单路径需要填写url，并进行正则校验
- 图标为选填
- 排序默认为0，使用数字输入框，且只能输入数字
##### （2.2）菜单更新
进入菜单管理页面，点击菜单行尾修改，弹出弹窗，修改**菜单名**，**父菜单id**，**菜单路径**，**图标**，**排序**后修改一个菜单。
- 校验规则如（2.1）菜单新增
##### （2.3）菜单查询
进入菜单管理页面，查询菜单树，并展示菜单树。
- 展示字段为**菜单名**，**菜单路径**，**图标**，**排序**，**创建时间**。
- 条件查询由前端实现，过滤条件为**菜单名**。
- 排序方式为**排序**字段数字越小越靠前，且只能为1-999的正整数。
##### （2.4）菜单删除
进入菜单管理页面，点击菜单行尾删除，弹出弹窗确认删除。
- 如果该菜单关联了角色，弹窗确认是否继续删除。如果仍然选择删除，则删除菜单表以及角色菜单表对应数据

<hr>

#### 【3】权限管理
##### （3.1）权限新增
进入权限管理页面，点击新增，弹出弹窗，填写**权限名称**，**描述**，**父权限id**后新增一个权限。
- 父权限id选择那里使用树形控件
- 同一级下，权限名称不可重复，需要做去重校验
##### （3.2）权限更新
进入权限管理页面，点击权限行尾修改，弹出弹窗，修改**权限名称**，**描述**后修改一个权限。
- 同一级下，权限名称不可重复，需要做去重校验
##### （3.3）权限查询
进入权限管理页面，查询权限树，并展示权限树。
- 展示字段为**权限名称**，**描述**，**创建时间**
- 条件查询由前端实现，过滤条件为**权限名称**
##### （3.4）权限删除
进入权限管理页面，点击权限行尾删除，弹出弹窗确认删除。
- 如果该权限关联了角色，弹窗确认是否继续删除。如果仍然选择删除，则删除权限表以及角色权限表对应数据

<hr>

#### 【4】角色管理
##### （4.1）角色新增
进入角色管理页面，点击新增，弹出弹窗，填写**角色名称**，**描述**后新增一个角色。
- 角色名称需要去重处理
##### （4.2）角色更新
进入角色管理页面，点击角色行尾修改，弹出弹窗，修改**角色名称**，**描述**后修改一个角色。<br>
进入角色管理页面，点击角色行尾菜单分配或权限分配，弹出弹窗，选择角色所属**菜单**或所属**权限**。
- 角色名称需要去重处理
##### （4.3）角色查询
进入角色管理页面，对角色进行分页查询，分页条件有**角色名称**可选择。
- 展示字段为**角色名**，**描述**，**创建时间**
- 条件查询使用字符串模糊查询。
##### （4.4）角色删除
进入角色管理页面，点击角色行尾删除，弹出弹窗确认删除。
- 如果该角色关联了用户、权限、菜单，弹窗确认是否继续删除。如果仍然选择删除，则删除角色表、角色权限表、角色部门表，用户角色表对应数据

<hr>

#### 【5】部门管理
##### （5.1）部门新增
进入部门管理页面，点击新增，弹出弹窗，填写**部门名称**，**描述**，**父部门id**后新增一个部门。
- 父部门id选择那里使用树形控件
- 部门名称不可重复，需要做去重校验
##### （5.2）部门更新
进入部门管理页面，点击部门行尾修改，弹出弹窗，修改**部门名称**，**描述**，**父部门id**后修改一个部门。
- 部门名称不可重复，需要做去重校验
##### （5.3）部门查询
进入部门管理页面，查询部门树，并展示部门树。
- 展示字段为**部门名称**，**描述**，**排序**，**创建时间**
- 排序方式为**排序**字段数字越小越靠前，且只能为1-999的正整数。
- 条件查询由前端实现，过滤条件为**部门名称**
##### （5.4）部门删除
进入部门管理页面，点击权限行尾删除，弹出弹窗确认删除。
- 如果该部门关联了用户，弹窗确认是否继续删除。如果仍然选择删除，则删除部门表，用户表对应数据，然后将用户的部门设置为顶级部门

<hr>

#### 【6】用户管理
##### （6.1）用户新增
进入用户管理页面，点击新增，弹出弹窗，填写**昵称**，**姓名**，**手机号**，**用户邮箱**，**性别**，**部门id**，**角色ids**后新增一个用户。
- 部门id选择那里使用树形控件
- 角色ids选择那里使用树形控件
- 手机号不可重复，需要做去重校验
- 是否禁用默认设置为未禁用，使用开关控件
- 密码默认设置为123456
##### （6.2）用户更新
进入用户管理页面，点击用户行尾修改，弹出弹窗，修改**昵称**，**用户邮箱**，**性别**，**部门id**，**角色ids**，**是否禁用**后修改一个用户。
- 部门id选择那里使用树形控件
- 角色ids选择那里使用树形控件
- 是否禁用那里使用开关控件
##### （6.3）用户查询
进入用户管理页面，对用户进行分页查询，分页条件有**姓名**，**手机号**，**用户邮箱**，**部门***，**创建时间**可选择。
- 展示字段为**昵称**，**姓名**，**手机号**，**用户邮箱**，**性别**，**部门**，**是否可用**，**创建时间**
- 条件查询使用字符串模糊查询。
- 创建时间查询精确到天
- 部门选择为树形控件
##### （6.4）用户删除
进入部门管理页面，点击权限行尾删除，弹出弹窗确认删除。
##### （6.5）用户禁用
在用户分页页面，每行数据后有开关按钮控制。
